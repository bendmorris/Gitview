window.Gitview=function(_1){this.postCreate=function(){if(this.frame){this.loadUser();}else{this.loadRepos();}};this.loadUser=function(){if(window.sessionStorage&&window.sessionStorage["user_data"+this.user]){var _2=JSON.parse(window.sessionStorage["user_data"+this.user]);this.createFrame();this.createFrameHeader(_2);this.loadRepos();}else{var _3=new XMLHttpRequest();var _4="http://bitpshr.info/cdn/ba-simple-proxy.php";var _5="?url=https://api.github.com/users/"+this.user;_3.open("GET",_4+_5,true);_3.onreadystatechange=function(){if(_3.readyState==4&&_3.status==200){var _6=JSON.parse(_3.responseText).contents;if(window.sessionStorage){window.sessionStorage["user_data"+this.user]=JSON.stringify(_6);}this.createFrame();this.createFrameHeader(_6);this.loadRepos();}}.bind(this);_3.send(null);}};this.loadRepos=function(){if(window.sessionStorage&&window.sessionStorage["repo_data"+this.user]){var _7=JSON.parse(window.sessionStorage["repo_data"+this.user]);this.repos=_7;this.sortRepos(this.repos);this._index=0;this._pageMax=this.count;for(var i=0;i<this.repos.length;i++){this.createRepoEntry(this.repos[i]);}this._repoCount=this.entries.length;}else{var _8=new XMLHttpRequest();var _9="http://bitpshr.info/cdn/ba-simple-proxy.php";var _a="?url=https://api.github.com/users/"+this.user+"/repos";_8.open("GET",_9+_a,true);_8.onreadystatechange=function(){if(_8.readyState==4&&_8.status==200){var _b=JSON.parse(_8.responseText).contents;console.log("data = ",_b);if(window.sessionStorage){window.sessionStorage["repo_data"+this.user]=JSON.stringify(_b);}this.repos=_b;this.sortRepos(this.repos);this._index=0;this._pageMax=this.count;for(var i=0;i<this.repos.length;i++){this.createRepoEntry(this.repos[i]);}this._repoCount=this.entries.length;}}.bind(this);_8.send(null);}};this.createFrame=function(){var _c=document.createElement("div");_c.style.cssText="box-shadow: 0 0 10px 3px #AAA;position:relative;text-align:left;line-height:15px;padding:5px 5px 30px 5px;"+"background:"+this.frameColor+";border-radius:3px;width:"+this.w+";";this.domNode.appendChild(_c);var _d=document.createElement("div");_d.style.cssText="height:100%;width:"+this.w+";";_c.appendChild(_d);var _e=document.createElement("a");_e.innerHTML=">";_e.style.cssText="cursor:pointer;cursor:hand;background-color: #eeeeee; background-image: -webkit-gradient(linear, left top, left bottom, "+"color-stop(0%, #eeeeee), color-stop(100%, #cccccc)); background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);"+" background-image: -moz-linear-gradient(top, #eeeeee, #cccccc); background-image: -ms-linear-gradient(top, #eeeeee, #cccccc); "+"background-image: -o-linear-gradient(top, #eeeeee, #cccccc); background-image: linear-gradient(top, #eeeeee, #cccccc);"+" border: 1px solid #ccc; border-bottom: 1px solid #bbb; border-radius: 2px; position:absolute; right:6px;bottom:4px;"+" color: #333; font: bold 11px/1 \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Geneva, Verdana, sans-serif; "+"text-align: center; text-shadow: 0 1px 0 #eee; display:inline-block; line-height:20px;width:20px;height:20px;";_c.appendChild(_e);var _f=document.createElement("a");_f.innerHTML="<";_f.style.cssText="cursor:pointer;cursor:hand;background-color: #eeeeee; background-image: -webkit-gradient(linear, left top, left bottom, "+"color-stop(0%, #eeeeee), color-stop(100%, #cccccc)); background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);"+" background-image: -moz-linear-gradient(top, #eeeeee, #cccccc); background-image: -ms-linear-gradient(top, #eeeeee, #cccccc); "+"background-image: -o-linear-gradient(top, #eeeeee, #cccccc); background-image: linear-gradient(top, #eeeeee, #cccccc);"+" border: 1px solid #ccc; border-bottom: 1px solid #bbb; border-radius: 2px; position:absolute; right:33px;bottom:4px;"+" color: #333; font: bold 11px/1 \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Geneva, Verdana, sans-serif; "+"text-align: center; text-shadow: 0 1px 0 #eee; display:inline-block; line-height:20px;width:20px;height:20px;";_c.appendChild(_f);_e.onclick=this.nextPage.bind(this);_f.onclick=this.prevPage.bind(this);this.domNode=_d;};this.createFrameHeader=function(_10){var _11=document.createElement("table");_11.style.cssText="height:45px;width:100%;border-spacing:0;"+"border-collapse:collapse;margin:0px;padding:0px;";this.domNode.parentNode.insertBefore(_11,this.domNode);var row=document.createElement("tr");_11.appendChild(row);var _12=document.createElement("td");_12.style.cssText="width:41px;vertical-align:top;padding:0px;";row.appendChild(_12);var _13=document.createElement("td");_13.style.cssText="padding-bottom: 4px;vertical-align: bottom;";row.appendChild(_13);var im=document.createElement("img");im.src=_10.avatar_url;im.style.cssText="width:40px;height:auto;border-radius:2px;position:relative;";_12.appendChild(im);var _14=document.createElement("span");_14.innerHTML=_10.login+"<br>";var _15=this.theme=="light"?"#333":"#EEE";_14.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:13px;"+"color:"+_15+";font-weight:bold;margin-left:6px";_13.appendChild(_14);var t=document.createElement("span");t.innerHTML=_10.followers+" follower";t.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;color:#AAA;margin-left:6px";if(_10.followers>1||_10.followers==0){t.innerHTML+="s";}_13.appendChild(t);var v=document.createElement("span");v.innerHTML=" - "+_10.public_repos+" repositor";v.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;color:#AAA;";if(_10.public_repos>1||_10.public_repos==0){v.innerHTML+="ies";}else{v.innerHTML+="y";}_13.appendChild(v);var x=document.createElement("span");x.innerHTML="compact";x.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:10px;color:#AAA;"+"cursor:hand;cursor:pointer;margin-left:5px;position:absolute;top:33px;right:27px";this.domNode.parentNode.insertBefore(x,this.domNode);var w=document.createElement("span");w.innerHTML="full";w.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;"+"font-size:10px;color:#AAA;cursor:hand;cursor:pointer;"+"position:absolute;top:33px;right:7px";this.domNode.parentNode.insertBefore(w,this.domNode);w.onclick=this.toggleFull.bind(this);x.onclick=this.toggleCompact.bind(this);};this.createRepoEntry=function(obj,_16){if(!obj.fork||(obj.fork&&this.showForks)){this.domNode.style.borderBottom="1px solid #DDD";this.domNode.style.background="white";this.domNode.style.borderRadius="2px";var _17=document.createElement("div");_17.className="entry";_17.style.cssText="border-radius:2px;padding-top: 5px;text-align:left;border-top:1px solid #DDD;background:white;";this.domNode.appendChild(_17);this.entries.push(_17);if(!this.frame){_17.style.width=this.w;}if(this.compact){_17.style.marginBottom="5px";}if(this._index>=this.count){_17.style.display="none";}var top=this.createTop(obj,_17);this.tops.push(top);var _18=this.createBottom(obj,_17);this.bottoms.push(_18);this._index++;}};this.createTop=function(obj,_19){var top=document.createElement("div");top.className="top";top.style.cssText="height:32px;line-height:32px;position:relative;";_19.appendChild(top);if(this.compact){top.style.borderBottom="0px";}var s=(obj.fork)?"http://bitpshr.info/cdn/fork.png":"http://bitpshr.info/cdn/gh-public.png";var im=document.createElement("img");im.src=s;im.style.cssText="position:absolute;left:4px;top:2px";top.appendChild(im);var _1a=document.createElement("a");_1a.innerHTML=obj.name;_1a.href="https://github.com/"+this.user+"/"+obj.name;_1a.style.cssText="color:#4183C4;font-size:24px;font-weight:bold;Helvetica, arial, freesans, clean, sans-serif;letter-spacing:-1px;position:absolute;"+"left:35px;text-decoration:none";top.appendChild(_1a);var _1b=document.createElement("div");_1b.style.cssText="position:relative;display:inline-block;float:right;color:#666;font-size:11px;"+"font-family:arial;font-weight:bold;height:32px;";top.appendChild(_1b);if(obj.language){var s=document.createElement("span");s.style.cssText="position:absolute;left:-180px;height:32px;line-height:32px;";s.innerHTML=obj.language;_1b.appendChild(s);}var _1c=document.createElement("a");_1c.innerHTML="<img style=\"position:absolute;top:50%;left:-20px;margin-top:-8px;\" src=\"http://bitpshr.info/cdn/star.png\"/>"+"<font color=\"#666;\">"+obj.watchers+"</font>";_1c.href="https://github.com/"+this.user+"/"+obj.name+"/watchers";_1c.style.cssText="color:gray;position:absolute;left:-85px;height:32px;line-height:32px;text-decoration:none;";_1b.appendChild(_1c);var _1d=document.createElement("a");_1d.innerHTML="<img style=\"position:absolute;top:50%;left:-20px;margin-top:-8px;\" src=\"http://bitpshr.info/cdn/forks.png\"/>"+"<font color=\"#666;\">"+obj.forks+"</font>";_1d.href="https://github.com/"+this.user+"/"+obj.name+"/network";_1d.style.cssText="color:gray;position:absolute;left:-35px;height:32px;line-height:32px;text-decoration:none;";_1b.appendChild(_1d);return top;};this.createBottom=function(obj,_1e){var _1f=document.createElement("div");_1f.className="bottom";_1f.style.cssText="position:relative;border-bottom-right-radius:3px;border-bottom-left-radius:3px;padding-bottom:5px;padding-top:5px;height:74px;";_1e.appendChild(_1f);if(!this._tmpW){this._tmpW=(_1e.offsetWidth-47);}var _20=new Gitgraph({user:this.user,repo:obj.name,showName:false,domNode:_1f,width:this._tmpW,background:"gray",allColor:"#EEEEEE",userColor:"#BBBBBB",height:80});_20.style.cssText="margin-left:35px;position:absolute;top:0px;";_20.style.marginLeft="30px";var d=obj.description;if(d.length>100){d=d.slice(0,97)+"...";}var _21=document.createElement("div");_21.innerHTML=d;_21.style.cssText="position:absolute;top:10px;font-family:Helvetica, arial, freesans, clean, sans-serif;"+"font-size:14px;margin-left:35px;height:30px;color:#333;";_1f.appendChild(_21);if(this.compact){_1f.style.display="none";}return _1f;};this.fixUpdateDate=function(_22){return _22;};this.nextPage=function(){var _23=this._pageMax;this._pageMax=((this._pageMax+this.count)<=this._repoCount)?(this._pageMax+this.count):this._repoCount;var _24=this._pageMax;if(_23!=_24){for(var i=0;i<this.entries.length;i++){if(i<_23){this.entries[i].style.display="none";}else{if(i<_24){this.entries[i].style.display="block";}}}}};this.prevPage=function(){var _25=0;for(var o=0;o<this.entries.length;o++){if(this.entries[o].style.display!="none"){_25++;}}this._pageMax=((this._pageMax-_25)>=this.count)?(this._pageMax-_25):this.count;var _26=this._pageMax;var _27=((this._pageMax-this.count)>=0)?(this._pageMax-this.count):0;if(!((_26==_27)&&(_26==0))){for(var i=0;i<this.entries.length;i++){if(i>=_26){this.entries[i].style.display="none";}else{if(i>=_27){this.entries[i].style.display="block";}}}}};this.toggleFull=function(){for(var i=0;i<this.bottoms.length;i++){this.bottoms[i].style.display="block";}for(var j=0;j<this.bottoms.length;j++){this.bottoms[j].style.borderBottom="1px solid #DDD1px solid #DDD";}};this.toggleCompact=function(){for(var i=0;i<this.bottoms.length;i++){this.bottoms[i].style.display="none";}for(var j=0;j<this.bottoms.length;j++){this.bottoms[j].style.borderBottom="0px";}};this.sortRepos=function(arr){arr.sort(function(a,b){var _28=new Date(a.pushed_at),_29=new Date(b.pushed_at);if(_28<_29){return -1;}if(_28>_29){return 1;}return 0;});arr.reverse();};this.loadScript=function(_2a,_2b){var _2c=document.getElementsByTagName("head")[0];if(_2c){var _2d=document.createElement("script");_2d.setAttribute("src",_2a);_2d.setAttribute("type","text/javascript");var _2e=function(){if(this.readyState=="complete"||this.readyState=="loaded"){_2b();}};_2d.onreadystatechange=_2e;_2d.onload=_2b;_2c.appendChild(_2d);}};this.bind=function(_2f){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var _30=Array.prototype.slice.call(arguments,1),_31=this,_32=function(){},_33=function(){return _31.apply(this instanceof _32?this:_2f||window,_30.concat(Array.prototype.slice.call(arguments)));};_32.prototype=this.prototype;_33.prototype=new _32();return _33;};if(!_1||!_1.user){throw new Error("Gitview: missing user and/or domNode arg");}else{this.user=_1.user;this.domNode=_1.domNode?_1.domNode:document.body;this.compact=_1.compact==true?true:false;this.frame=true;this.showForks=_1.showForks==false?false:true;this.cache=_1.cache==false?false:true;this.count=_1.count?_1.count:3;this.w=_1.width?_1.width:"440px";this.w=this.w.substring(0,this.w.length-2)<300?"350px":this.w;this.theme=_1.theme||"light";this.frameColor=this.theme=="light"?"white":"#333";this.repos=[];this.entries=[];this.bottoms=[];this.tops=[];if(!Function.prototype.bind){Function.prototype.bind=this.bind;}this.loadScript("http://bitpshr.info/cdn/Gitgraph.min.js",this.postCreate.bind(this));}};