window.Gitview=function(_1){this.postCreate=function(){if(this.frame){this.loadUser();}else{this.loadRepos();}};this.loadUser=function(){if(window.sessionStorage&&window.sessionStorage["user_data"+this.user]){var _2=JSON.parse(window.sessionStorage["user_data"+this.user]);this.createFrame();this.createFrameHeader(_2);this.loadRepos();}else{var _3=new XMLHttpRequest();_3.open("GET","https://api.github.com/users/"+this.user,true);_3.onreadystatechange=function(){if(_3.readyState==4&&_3.status==200){var _4=JSON.parse(_3.responseText);if(window.sessionStorage){window.sessionStorage["user_data"+this.user]=JSON.stringify(_4);}this.createFrame();this.createFrameHeader(_4);this.loadRepos();}}.bind(this);_3.send(null);}};this.loadRepos=function(){if(window.sessionStorage&&window.sessionStorage["repo_data"+this.user]){var _5=JSON.parse(window.sessionStorage["repo_data"+this.user]);this.repos=_5;this.sortRepos(this.repos);this._index=0;this._pageMax=this.count;for(var i=0;i<this.repos.length;i++){this.createRepoEntry(this.repos[i]);}this._repoCount=this.entries.length;}else{var _6=new XMLHttpRequest();_6.open("GET","https://api.github.com/users/"+this.user+"/repos",true);_6.onreadystatechange=function(){if(_6.readyState==4&&_6.status==200){var _7=JSON.parse(_6.responseText);if(window.sessionStorage){window.sessionStorage["repo_data"+this.user]=JSON.stringify(_7);}this.repos=_7;this.sortRepos(this.repos);this._index=0;this._pageMax=this.count;for(var i=0;i<this.repos.length;i++){this.createRepoEntry(this.repos[i]);}this._repoCount=this.entries.length;}}.bind(this);_6.send(null);}};this.createFrame=function(){var _8=document.createElement("div");_8.style.cssText="box-shadow: 0 0 10px 3px #AAA;position:relative;text-align:left;line-height:15px;padding:5px 5px 30px 5px;"+"background:"+this.frameColor+";border-radius:3px;width:"+this.w+";";this.domNode.appendChild(_8);var _9=document.createElement("div");_9.style.cssText="height:100%;width:"+this.w+";";_8.appendChild(_9);var _a=document.createElement("a");_a.innerHTML=">";_a.style.cssText="cursor:pointer;cursor:hand;background-color: #eeeeee; background-image: -webkit-gradient(linear, left top, left bottom, "+"color-stop(0%, #eeeeee), color-stop(100%, #cccccc)); background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);"+" background-image: -moz-linear-gradient(top, #eeeeee, #cccccc); background-image: -ms-linear-gradient(top, #eeeeee, #cccccc); "+"background-image: -o-linear-gradient(top, #eeeeee, #cccccc); background-image: linear-gradient(top, #eeeeee, #cccccc);"+" border: 1px solid #ccc; border-bottom: 1px solid #bbb; border-radius: 2px; position:absolute; right:6px;bottom:4px;"+" color: #333; font: bold 11px/1 \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Geneva, Verdana, sans-serif; "+"text-align: center; text-shadow: 0 1px 0 #eee; display:inline-block; line-height:20px;width:20px;height:20px;";_8.appendChild(_a);var _b=document.createElement("a");_b.innerHTML="<";_b.style.cssText="cursor:pointer;cursor:hand;background-color: #eeeeee; background-image: -webkit-gradient(linear, left top, left bottom, "+"color-stop(0%, #eeeeee), color-stop(100%, #cccccc)); background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);"+" background-image: -moz-linear-gradient(top, #eeeeee, #cccccc); background-image: -ms-linear-gradient(top, #eeeeee, #cccccc); "+"background-image: -o-linear-gradient(top, #eeeeee, #cccccc); background-image: linear-gradient(top, #eeeeee, #cccccc);"+" border: 1px solid #ccc; border-bottom: 1px solid #bbb; border-radius: 2px; position:absolute; right:33px;bottom:4px;"+" color: #333; font: bold 11px/1 \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Geneva, Verdana, sans-serif; "+"text-align: center; text-shadow: 0 1px 0 #eee; display:inline-block; line-height:20px;width:20px;height:20px;";_8.appendChild(_b);_a.onclick=this.nextPage.bind(this);_b.onclick=this.prevPage.bind(this);this.domNode=_9;};this.createFrameHeader=function(_c){var _d=document.createElement("table");_d.style.cssText="height:45px;width:100%;border-spacing:0;"+"border-collapse:collapse;margin:0px;padding:0px;";this.domNode.parentNode.insertBefore(_d,this.domNode);var _e=document.createElement("tr");_d.appendChild(_e);var _f=document.createElement("td");_f.style.cssText="width:41px;vertical-align:top;padding:0px;";_e.appendChild(_f);var _10=document.createElement("td");_10.style.cssText="padding-bottom: 4px;vertical-align: bottom;";_e.appendChild(_10);var im=document.createElement("img");im.src=_c.avatar_url;im.style.cssText="width:40px;height:auto;border-radius:2px;position:relative;";_f.appendChild(im);var _11=document.createElement("span");_11.innerHTML=_c.login+"<br>";var _12=this.theme=="light"?"#333":"#EEE";_11.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:13px;"+"color:"+_12+";font-weight:bold;margin-left:6px";_10.appendChild(_11);var t=document.createElement("span");t.innerHTML=_c.followers+" follower";t.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;color:#AAA;margin-left:6px";if(_c.followers>1||_c.followers==0){t.innerHTML+="s";}_10.appendChild(t);var v=document.createElement("span");v.innerHTML=" - "+_c.public_repos+" repositor";v.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;color:#AAA;";if(_c.public_repos>1||_c.public_repos==0){v.innerHTML+="ies";}else{v.innerHTML+="y";}_10.appendChild(v);var x=document.createElement("span");x.innerHTML="compact";x.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:10px;color:#AAA;"+"cursor:hand;cursor:pointer;margin-left:5px;position:absolute;top:33px;right:27px";this.domNode.parentNode.insertBefore(x,this.domNode);var w=document.createElement("span");w.innerHTML="full";w.style.cssText="font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;"+"font-size:10px;color:#AAA;cursor:hand;cursor:pointer;"+"position:absolute;top:33px;right:7px";this.domNode.parentNode.insertBefore(w,this.domNode);w.onclick=this.toggleFull.bind(this);x.onclick=this.toggleCompact.bind(this);};this.createRepoEntry=function(obj,_13){if(!obj.fork||(obj.fork&&this.showForks)){this.domNode.style.borderBottom="1px solid #DDD";this.domNode.style.background="white";this.domNode.style.borderRadius="2px";var _14=document.createElement("div");_14.className="entry";_14.style.cssText="border-radius:2px;padding-top: 5px;text-align:left;border-top:1px solid #DDD;background:white;";this.domNode.appendChild(_14);this.entries.push(_14);if(!this.frame){_14.style.width=this.w;}if(this.compact){_14.style.marginBottom="5px";}if(this._index>=this.count){_14.style.display="none";}var top=this.createTop(obj,_14);this.tops.push(top);var _15=this.createBottom(obj,_14);this.bottoms.push(_15);this._index++;}};this.createTop=function(obj,_16){var top=document.createElement("div");top.className="top";top.style.cssText="height:32px;line-height:32px;position:relative;";_16.appendChild(top);if(this.compact){top.style.borderBottom="0px";}var s=(obj.fork)?"http://bitpshr.info/cdn/fork.png":"http://bitpshr.info/cdn/gh-public.png";var im=document.createElement("img");im.src=s;im.style.cssText="position:absolute;left:4px;top:2px";top.appendChild(im);var _17=document.createElement("a");_17.innerHTML=obj.name;_17.href="https://github.com/"+this.user+"/"+obj.name;_17.style.cssText="color:#4183C4;font-size:24px;font-weight:bold;Helvetica, arial, freesans, clean, sans-serif;letter-spacing:-1px;position:absolute;"+"left:35px;text-decoration:none";top.appendChild(_17);var _18=document.createElement("div");_18.style.cssText="position:relative;display:inline-block;float:right;color:#666;font-size:11px;"+"font-family:arial;font-weight:bold;height:32px;";top.appendChild(_18);if(obj.language){var s=document.createElement("span");s.style.cssText="position:absolute;left:-180px;height:32px;line-height:32px;";s.innerHTML=obj.language;_18.appendChild(s);}var _19=document.createElement("a");_19.innerHTML="<img style=\"position:absolute;top:50%;left:-20px;margin-top:-8px;\" src=\"http://bitpshr.info/cdn/star.png\"/>"+"<font color=\"#666;\">"+obj.watchers+"</font>";_19.href="https://github.com/"+this.user+"/"+obj.name+"/watchers";_19.style.cssText="color:gray;position:absolute;left:-85px;height:32px;line-height:32px;text-decoration:none;";_18.appendChild(_19);var _1a=document.createElement("a");_1a.innerHTML="<img style=\"position:absolute;top:50%;left:-20px;margin-top:-8px;\" src=\"http://bitpshr.info/cdn/forks.png\"/>"+"<font color=\"#666;\">"+obj.forks+"</font>";_1a.href="https://github.com/"+this.user+"/"+obj.name+"/network";_1a.style.cssText="color:gray;position:absolute;left:-35px;height:32px;line-height:32px;text-decoration:none;";_18.appendChild(_1a);return top;};this.createBottom=function(obj,_1b){var _1c=document.createElement("div");_1c.className="bottom";_1c.style.cssText="position:relative;border-bottom-right-radius:3px;border-bottom-left-radius:3px;padding-bottom:5px;padding-top:5px;height:74px;";_1b.appendChild(_1c);if(!this._tmpW){this._tmpW=(_1b.offsetWidth-47);}var _1d=new Gitgraph({user:this.user,repo:obj.name,showName:false,domNode:_1c,width:this._tmpW,background:"gray",allColor:"#EEEEEE",userColor:"#BBBBBB",height:80});_1d.style.cssText="margin-left:35px;position:absolute;top:0px;";_1d.style.marginLeft="30px";var d=obj.description;if(d.length>100){d=d.slice(0,97)+"...";}var _1e=document.createElement("div");_1e.innerHTML=d;_1e.style.cssText="position:absolute;top:10px;font-family:Helvetica, arial, freesans, clean, sans-serif;"+"font-size:14px;margin-left:35px;height:30px;color:#333;";_1c.appendChild(_1e);if(this.compact){_1c.style.display="none";}return _1c;};this.fixUpdateDate=function(_1f){return _1f;};this.nextPage=function(){var _20=this._pageMax;this._pageMax=((this._pageMax+this.count)<=this._repoCount)?(this._pageMax+this.count):this._repoCount;var _21=this._pageMax;if(_20!=_21){for(var i=0;i<this.entries.length;i++){if(i<_20){this.entries[i].style.display="none";}else{if(i<_21){this.entries[i].style.display="block";}}}}};this.prevPage=function(){var _22=0;for(var o=0;o<this.entries.length;o++){if(this.entries[o].style.display!="none"){_22++;}}this._pageMax=((this._pageMax-_22)>=this.count)?(this._pageMax-_22):this.count;var _23=this._pageMax;var _24=((this._pageMax-this.count)>=0)?(this._pageMax-this.count):0;if(!((_23==_24)&&(_23==0))){for(var i=0;i<this.entries.length;i++){if(i>=_23){this.entries[i].style.display="none";}else{if(i>=_24){this.entries[i].style.display="block";}}}}};this.toggleFull=function(){for(var i=0;i<this.bottoms.length;i++){this.bottoms[i].style.display="block";}for(var j=0;j<this.bottoms.length;j++){this.bottoms[j].style.borderBottom="1px solid #DDD1px solid #DDD";}};this.toggleCompact=function(){for(var i=0;i<this.bottoms.length;i++){this.bottoms[i].style.display="none";}for(var j=0;j<this.bottoms.length;j++){this.bottoms[j].style.borderBottom="0px";}};this.sortRepos=function(arr){arr.sort(function(a,b){var _25=new Date(a.pushed_at),_26=new Date(b.pushed_at);if(_25<_26){return -1;}if(_25>_26){return 1;}return 0;});arr.reverse();};this.loadScript=function(_27,_28){var _29=document.getElementsByTagName("head")[0];if(_29){var _2a=document.createElement("script");_2a.setAttribute("src",_27);_2a.setAttribute("type","text/javascript");var _2b=function(){if(this.readyState=="complete"||this.readyState=="loaded"){_28();}};_2a.onreadystatechange=_2b;_2a.onload=_28;_29.appendChild(_2a);}};this.bind=function(_2c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var _2d=Array.prototype.slice.call(arguments,1),_2e=this,_2f=function(){},_30=function(){return _2e.apply(this instanceof _2f?this:_2c||window,_2d.concat(Array.prototype.slice.call(arguments)));};_2f.prototype=this.prototype;_30.prototype=new _2f();return _30;};if(!_1||!_1.user){throw new Error("Gitview: missing user and/or domNode arg");}else{this.user=_1.user;this.domNode=_1.domNode?_1.domNode:document.body;this.compact=_1.compact==true?true:false;this.frame=true;this.showForks=_1.showForks==false?false:true;this.cache=_1.cache==false?false:true;this.count=_1.count?_1.count:3;this.w=_1.width?_1.width:"440px";this.w=this.w.substring(0,this.w.length-2)<300?"350px":this.w;this.theme=_1.theme||"light";this.frameColor=this.theme=="light"?"white":"#333";this.repos=[];this.entries=[];this.bottoms=[];this.tops=[];if(!Function.prototype.bind){Function.prototype.bind=this.bind;}this.loadScript("http://bitpshr.info/cdn/Gitgraph.min.js",this.postCreate.bind(this));}};